---
title: "Data Driven Report Demo"
author: "Andrew Grogan-Kaylor"
date: "`r Sys.Date()`"
output:
  pdf_document: 
    fig_height: 2.0
    highlight: haddock
    latex_engine: xelatex
    number_sections: yes
    toc: yes
  html_document: 
    code_download: yes
    fig_height: 3
    highlight: haddock
    number_sections: yes
    theme: flatly
    toc: yes
    toc_float:
      collapsed: yes
      smooth_scroll: yes
  bookdown::epub_book: default  
  word_document: 
    fig_height: 3
    toc: yes
    reference_docx: "markstat.docx"
mainfont: Futura
fontsize: 12pt
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE,
                      fig.margin = TRUE)

```

```{r}

library(gapminder) # gapminder data

library(ggplot2) # beautiful graphs

library(pander) # beautiful tables

library(formattable)

library(kableExtra)

library(knitr) # knitting RMarkdown

```

# Background

Life expectancy differs in countries around the world. Life expectancy and *per capita* *Gross Domestic Product* (GDP) appear to be related.


```{r}

ggplot(gapminder,
       aes(x = lifeExp, 
           fill = continent)) +
  geom_histogram() + 
  labs(title = "Distribution of Life Expectancy",
       x = "Life Expectancy") + 
  theme_minimal() +
  scale_fill_viridis_d() 

```

# Methods

Data were provided via the `gapminder` library which provides a sample of data available on [gapminder.org](http://www.gapminder.org)

# Results

Results indicate the per capita GDP and life expectancy are related in a non-linear way.

## Graph

```{r}

ggplot(gapminder,
       aes(x = gdpPercap,
           y = lifeExp,
           color = continent)) +
  geom_point() +
  geom_smooth() +
  labs(title = "Life Expectancy by GDP",
       x = "GDP Per Capita",
       y = "Life Expectancy",
       caption = "Gapminder Data") +
  scale_color_viridis_d() +
  theme_minimal()

```


## Table

```{r}

# pander(table(gapminder$continent),
#        caption = "Data Points by Continent")

pander(summary(gapminder$lifeExp),
       caption = "Life Expectancy")

pander(summary(gapminder$gdpPercap),
       caption = "GDP Per Capita")

```


# Discussion

*Per capita* GDP and life expectancy appear to be related. These findings may have implications for public health policy, for development policy, for intervention, and for advocacy.



